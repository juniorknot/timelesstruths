!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){function t(e){return r.raw?e:encodeURIComponent(e)}function o(e){return r.raw?e:decodeURIComponent(e)}function i(e){return t(r.json?JSON.stringify(e):String(e))}function n(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(a," ")),r.json?JSON.parse(e):e}catch(t){}}function s(t,o){var i=r.raw?t:n(t);return e.isFunction(o)?o(i):i}var a=/\+/g,r=e.cookie=function(n,a,c){if(arguments.length>1&&!e.isFunction(a)){if("number"==typeof c&&(c={expires:c,path:"/"}),c=e.extend({},r.defaults,c),"number"==typeof c.expires){var l=c.expires,u=c.expires=new Date;u.setTime(+u+864e5*l)}return null===a?e.removeCookie(n,c):document.cookie=[t(n),"=",i(a),c.expires?"; expires="+c.expires.toUTCString():"",c.path?"; path="+c.path:"",c.domain?"; domain="+c.domain:"",c.secure?"; secure":""].join("")}for(var d=n?void 0:{},h=document.cookie?document.cookie.split("; "):[],m=0,f=h.length;f>m;m++){var p=h[m].split("="),$=o(p.shift()),v=p.join("=");if(n&&n===$){d=s(v,a);break}n||void 0===(v=s(v))||(d[$]=v)}return d};r.defaults={},e.removeCookie=function(t,o){return void 0===e.cookie(t)?!1:(e.cookie(t,"",e.extend({},o,{expires:-1})),!e.cookie(t))}});var TT=TT||{};TT.Utility={initTranslate:function(){$("#btn_translate").on("click",function(){$el=$("#translate"),$el.hasClass("init")||($.getScript("http://translate.google.com/translate_a/element.js?cb=TT.Utility.initGoogleTranslate"),$el.addClass("init")),$(this).hide(),$el.toggleClass("open"),ga("send","event","Translate",$el.hasClass("open")?"show":"hide")})},initGoogleTranslate:function(){new google.translate.TranslateElement({pageLanguage:"en"},"google_translate")},initTOC:function(){$(".toc .collapsible").each(function(){var e=$(this).attr("id");"open"!=$.cookie("t_"+e)&&$(this).addClass("min")}).on("click",function(){var e=$(this).attr("id");return $(this).toggleClass("min"),$.cookie("t_"+e,$(this).hasClass("min")?null:"open",{expires:1/24/12}),!1})},initNotes:function(){$(".page .note-ref").on("click",function(){return $el=$($(this).attr("href")),$el.css("top",$(this).position().top),$el.toggle(),(b=+$el.css("bottom").replace("px",""))<0&&$el.css("top",$el.position().top+b),!1}),$(".page .note-num").on("click",function(){$(this).parents(".note").hide()})},trackLink:function(e,t,o){try{ga("send","event",t,o),setTimeout('window.location = "'+e.href+'"',100)}catch(i){}return!1}},TT.Music={format:"pdf"==$.cookie("m_score_format")?"pdf":"sib",zoom:$.cookie("m_score_zoom")||760,notes:"+"==$.cookie("m_score_notes")?"shaped":"standard",init:function(){this.initScore()},initScore:function(){$("#score-format").on("click",function(){TT.Music.setScore("format",$(this).val())}),$("#score-notes").on("click",function(){TT.Music.setScore("notes",$(this).val())}),$("#score-zoom").on("click",function(){TT.Music.setZoom($(this).val())}),$(".help-link .show, .help-link .hide").on("click",function(){return $el=$(this).parents(".panel-toggle"),$el.toggleClass("hide"),ga("send","event","Score",($el.hasClass("hide")?"hide":"show")+" help"),!1})},setZoom:function(e){if(this.zoom!=e){this.zoom=e,$.cookie("m_score_zoom",this.zoom,1e3);var t=this.zoom,o=1.3*t+26;$("#score").width(t).height(o)}},setScore:function(e,t){if("format"==e){if(this.format==t)return;this.format=t,$.cookie("m_score_format","pdf"==this.format?"pdf":null,1e3)}if("notes"==e){if(this.notes==t)return;this.notes=t,$.cookie("m_score_notes","shaped"==this.notes?"+":null,1e3)}var o="data-src-"+this.format+"-"+this.notes,i=$("#score"),n=i.attr(o);if(n)i.html('<div class="wrapper">'+("sib"==this.format?'<object id="s_sib" type="application/x-sibelius-score" data="'+n+'"><param name="src" value="'+n+'" /><param name="scorch_minimum_version" value="3000" /><param name="scorch_shrink_limit" value="100" /><param name="shrinkwindow" value="0" /></object>':'<iframe id="s_pdf" frameborder="0" src="'+n+'"></iframe>')+"</div>");else{var s=encodeURI("Request: "+$("title").text().replace(/ >.+/,"")+" (."+this.format+")"),a=encodeURI("I would like to have the ."+this.format+" sheet music for this song added to your priority list. Thank you."),r=encodeURI(window.location.href);i.html('<div class="wrapper"><div class="error-message"><p>Sorry, the sheet music is not available in this format (.'+TT.Music.format+'):</p><ul><li><a class="blue" href="'+$("body").attr("data-level")+"contact/?subject="+s+"&amp;comments="+a+"&amp;url="+r+'">Request sheet music</a></li></ul></div></div>')}}},$(function(){TT.Utility.initNotes(),$("html").hasClass("dev")&&($("body").append("<div id='dev'>Dev | <button data-opt='exit'>exit</button></dev>"),$('#dev [data-opt="exit"]').click(function(){$.cookie("dev",!1,{path:"/"}),window.location.reload()}))});